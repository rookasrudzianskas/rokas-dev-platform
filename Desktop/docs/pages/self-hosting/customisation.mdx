
### Customization

#### Observability

You can use [sentry](https://sentry.io/welcome/) for error reporting. You can set your own sentry config in `config.yaml`

`config.yaml`
```yaml
sentry: YOUR_DSN
```

#### Custom database

You need to implement the abstract class `VectorDatabase` found [here](https://github.com/rookasrudzianskas/demonbase/blob/main/demonbase/database/base.py) and then use it like:

```py
from demonbase import get_app

from demonbase.database.supabase_db import Supabase
from demonbase.embedding.demonsx import DemonsX

from .my_custom_db import MyCustomDb

app = (
    get_app()
    .use_embedder(DemonsX("<your key>"))
    .use_db(MyCustomDb())
).run()
```


#### Custom middleware

Example production middlewares:

- Playground Demonbase instance is [open source](https://github.com/rookasrudzianskas/demonbase-hosted)

You can a custom middleware like this:

```py
from demonbase import get_app

from demonbase.database.postgres_db import Postgres
from demonbase.embedding.demonsx import DemonsX

async def process_time(request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    response.headers["X-Process-Time"] = str(process_time)

    return response

app = (
    get_app()
    .use_middleware(process_time)
    .use_embedder(DemonsX("<your key>"))
    .use_db(Postgres())
).run()

```

```bash
curl -X POST -H "Content-Type: application/json" -d '{"query": "Bob"}' http://localhost:8080/v1/people/search
```

```json
{
  "query": "Bob",
  "similarities": [
    {
      "score": 0.828773,
      "id": "ABCU75FEBE",
      "data": "Elon is sipping a tea on Mars",
    }
  ],
  "headers": {
    "x-process-time": "0.0001239776611328125"
  }
}
```

#### Custom Embedder

You need to implement the abstract class `Embedder` found [here](https://github.com/rookasrudzianskas/demonbase/blob/main/demonbase/embedding/base.py) and then use it like:

```py
from demonbase import get_app

from demonbase.database.postgres_db import Postgres

from .my_custom_embedder import MyCustomEmbedder

app = (
    get_app()
    .use_db(Postgres())
    .use_embedder(MyCustomEmbedder())
).run()
```

[//]: # (Check this [example]&#40;https://docs.demonbase.xyz/examples/implement-a-local-first-demonbase&#41;.)
